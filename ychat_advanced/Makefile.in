OBJS=$(SRCS:.cpp=.o)
CC=g++
LDFLAGS=@LDFLAGS@ -lstdc++ -lmysqlclient -lncurses -g 
LDADD=-pthread -D_THREAD_SAFE
all: ychat	
modules:
	make -C ./mods
clean_modules:
	make -C ./mods clean
clean_base:
	@echo Cleaning base
	rm *.o 
$(SRCS): 
	$(CC) $(CFLAGS) -c $*.cpp
infotext:
	@echo Compiling base
stats:
	perl scripts/stats.pl > stats.txt || ./scripts/noperl.sh
	cat stats.txt 2>/dev/null
base:	infotext $(OBJS)
stats:
	perl scripts/stats.pl > stats.txt || ./scripts/noperl.sh
	cat stats.txt 2>/dev/null
ychat:  $(OBJS) modules
	$(CC) $(LDFLAGS) -o $@ $(OBJS) $(LDADD)
	perl scripts/buildnr.pl || ./scripts/noperl.sh
	perl scripts/stats.pl > stats.txt || ./scripts/noperl.sh
	cat stats.txt 2>/dev/null
clean:	clean_base clean_modules

